# Simple JSON Formatter
A simple JavaScript program that beautifies JSON in a human readable way. Uses a heuristic approach - no constaint optimization.

JSON is a standard human- and machine-readable data representation language. Despite many attempts to replace it (e.g. YAML) - it remains the 
universal standard. However, there is a significant disparity between how humans and machines choose to format JSON.
In industry, I find there are many times when humans need to read large JSON (e.g., API responses, `az vm list-skus --all`).

The way machines format JSON is not space efficient.

For example, consider the following simple JSON definition.
```json
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
```

Most JSON prettifiers (e.g., VSCode) will print
```json
[
    1,
    2,
    3,
    [
        4,
        5,
        [
            6,
            7,
            8
        ]
    ],
    "9"
]
```

No human developer would ever write that! Humans write JSON in a more natural and readable way.

For example:
```jsonc
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
```

```jsonc
[
    1, 2, 3,
    [4, 5, [6, 7, 8]],
    "9"
]
```

```jsonc
[
    1, 2, 3,
    [
        4, 5,
        [6, 7, 8]
    ],
    "9"
]
```

## How it works
We use a simple heuristic that is good enough in most cases.
1. Compute tree of lengths if each element (and its children) were printed on a single line.
2. Walking the tree, expand the top-most elements (closest to the root) first until every subtree fits
on a single line.

In general this is a constrained optimization problem depending on the metric to optimize
(# of lines, # of expansions, etc.). But our heuristic works well enough in practical cases.

## Object Example
```json
----------------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
--------------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
------------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
----------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
--------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
------------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
----------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
--------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
------------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
----------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
--------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
------------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
----------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
--------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
------------------------------------------------------------------------
{"the quick brown fox": {"jumps": "over", "the lazy": ["d", "o", "g"]}}
----------------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
--------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
------------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": ["d", "o", "g"]
    }
}
----------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", "o", "g"
        ]
    }
}
--------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", "o", "g"
        ]
    }
}
------------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", "o", "g"
        ]
    }
}
----------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", "o", "g"
        ]
    }
}
--------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
------------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
----------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
--------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
------------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
----------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
--------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
------------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
----------
{
    "the quick brown fox": {
        "jumps": "over", 
        "the lazy": [
            "d", 
            "o", 
            "g"
        ]
    }
}
```

## Array Example
```json
------------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-----------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
----------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
---------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
--------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
------------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-----------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
----------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
---------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
--------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
------------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-----------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
----------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
---------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
--------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
------------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-----------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
----------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
---------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
--------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
------------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
-----------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
----------------------------------
[1, 2, 3, [4, 5, [6, 7, 8]], "9"]
---------------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
--------------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
-------------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
------------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
-----------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
----------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
---------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
--------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
-------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
------------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
-----------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
----------------------
[
    1, 
    2, 
    3, 
    [4, 5, [6, 7, 8]], 
    "9"
]
---------------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [6, 7, 8]
    ], 
    "9"
]
--------------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [6, 7, 8]
    ], 
    "9"
]
-------------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [6, 7, 8]
    ], 
    "9"
]
------------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [6, 7, 8]
    ], 
    "9"
]
-----------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
----------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
---------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
--------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
-------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
------------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
-----------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
----------
[
    1, 
    2, 
    3, 
    [
        4, 
        5, 
        [
            6, 
            7, 
            8
        ]
    ], 
    "9"
]
```

